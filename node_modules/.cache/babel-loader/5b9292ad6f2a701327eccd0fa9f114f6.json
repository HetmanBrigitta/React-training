{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { userApi } from '../api/userApi';\nimport useGetRoles from './useRoles';\n\nconst useUsers = activePage => {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [totalNumberOfPages, setTotalNumberOfPages] = useState(0);\n  const [roles] = useGetRoles();\n\n  const getUsers = async () => {\n    try {\n      var _data$users;\n\n      setIsLoading(true);\n      const {\n        data\n      } = await userApi.getUser();\n\n      if (data.total) {\n        setTotalNumberOfPages(data.total / 10);\n      } // console.log('data:',data);\n      // if (index && index >= activePage - 1 * 10 && index < activePage * 10) {\n      //   setUsers = copy;\n      // }\n      // list.map(element, id)\n      // TODO: Map this list and return only according to activePage\n      //ex. activePage === 1 --> 0,9\n      //ex. activePage === 2 --> 10,19\n      // list.map((el, id) => {id >= activePage - 1 * 10 && id < activePage * 10 } return)\n\n\n      console.log('data.users:', data.users);\n      const copy = data === null || data === void 0 ? void 0 : (_data$users = data.users) === null || _data$users === void 0 ? void 0 : _data$users.map(({\n        firstName,\n        lastName,\n        email,\n        role,\n        birthDate,\n        createdAt\n      }) => {\n        return {\n          firstName,\n          lastName,\n          role: roles[role].label,\n          email,\n          birthDate,\n          createdAt\n        };\n      });\n      setUsers(copy);\n      console.log('copy', copy); // if (index && index >= activePage - 1 * 10 && index < activePage * 10) {\n      //   return setUsers(copy);\n      // }\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getUsers();\n  }, [activePage]);\n  return [users, totalNumberOfPages, isLoading];\n};\n\n_s(useUsers, \"inZNmdfPJEGbAsOH5LigpCZh+OQ=\", false, function () {\n  return [useGetRoles];\n});\n\nexport default useUsers;","map":{"version":3,"sources":["/home/brigitta.hetman/B/OFFICE/my_projects/hotel-service-management/src/hooks/useUsers.ts"],"names":["useEffect","useState","userApi","useGetRoles","useUsers","activePage","isLoading","setIsLoading","users","setUsers","totalNumberOfPages","setTotalNumberOfPages","roles","getUsers","data","getUser","total","console","log","copy","map","firstName","lastName","email","role","birthDate","createdAt","label","e"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,OAAOC,WAAP,MAAwB,YAAxB;;AAMA,MAAMC,QAAQ,GAAIC,UAAD,IAAiC;AAAA;;AAChD,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BN,QAAQ,CAAU,KAAV,CAA1C;AACA,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAe,EAAf,CAAlC;AACA,QAAM,CAACS,kBAAD,EAAqBC,qBAArB,IAA8CV,QAAQ,CAAS,CAAT,CAA5D;AACA,QAAM,CAACW,KAAD,IAAUT,WAAW,EAA3B;;AAEA,QAAMU,QAAQ,GAAG,YAA2B;AAC1C,QAAI;AAAA;;AACFN,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,YAAM;AAAEO,QAAAA;AAAF,UAAW,MAAMZ,OAAO,CAACa,OAAR,EAAvB;;AAEA,UAAID,IAAI,CAACE,KAAT,EAAgB;AACdL,QAAAA,qBAAqB,CAACG,IAAI,CAACE,KAAL,GAAa,EAAd,CAArB;AACD,OANC,CAOF;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BJ,IAAI,CAACN,KAA/B;AACA,YAAMW,IAAI,GAAGL,IAAH,aAAGA,IAAH,sCAAGA,IAAI,CAAEN,KAAT,gDAAG,YAAaY,GAAb,CAAiB,CAAC;AAAEC,QAAAA,SAAF;AAAaC,QAAAA,QAAb;AAAuBC,QAAAA,KAAvB;AAA8BC,QAAAA,IAA9B;AAAoCC,QAAAA,SAApC;AAA+CC,QAAAA;AAA/C,OAAD,KAAgE;AAC5F,eAAO;AACLL,UAAAA,SADK;AAELC,UAAAA,QAFK;AAGLE,UAAAA,IAAI,EAAEZ,KAAK,CAACY,IAAD,CAAL,CAAYG,KAHb;AAILJ,UAAAA,KAJK;AAKLE,UAAAA,SALK;AAMLC,UAAAA;AANK,SAAP;AAQD,OATY,CAAb;AAWAjB,MAAAA,QAAQ,CAACU,IAAD,CAAR;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBC,IAAnB,EA/BE,CAgCF;AACA;AACA;AAED,KApCD,CAoCE,OAAOS,CAAP,EAAU;AACVX,MAAAA,OAAO,CAACC,GAAR,CAAYU,CAAZ;AACD,KAtCD,SAsCU;AACRrB,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,GA1CD;;AA4CAP,EAAAA,SAAS,CAAC,MAAM;AACda,IAAAA,QAAQ;AACT,GAFQ,EAEN,CAACR,UAAD,CAFM,CAAT;AAIA,SAAO,CAACG,KAAD,EAAQE,kBAAR,EAA4BJ,SAA5B,CAAP;AACD,CAvDD;;GAAMF,Q;UAIYD,W;;;AAqDlB,eAAeC,QAAf","sourcesContent":["import { useEffect, useState } from 'react';\nimport { userApi } from '../api/userApi';\nimport useGetRoles from './useRoles';\n\nimport { IKeyObject } from '../interfaces/IUser';\n\ntype TReturn = [IKeyObject[], number, boolean];\n\nconst useUsers = (activePage: number): TReturn => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [users, setUsers] = useState<IKeyObject[]>([]);\n  const [totalNumberOfPages, setTotalNumberOfPages] = useState<number>(0);\n  const [roles] = useGetRoles();\n\n  const getUsers = async (): Promise<void> => {\n    try {\n      setIsLoading(true);\n      const { data } = await userApi.getUser();\n\n      if (data.total) {\n        setTotalNumberOfPages(data.total / 10);\n      }\n      // console.log('data:',data);\n      // if (index && index >= activePage - 1 * 10 && index < activePage * 10) {\n      //   setUsers = copy;\n      // }\n\n      // list.map(element, id)\n\n      // TODO: Map this list and return only according to activePage\n      //ex. activePage === 1 --> 0,9\n      //ex. activePage === 2 --> 10,19\n      // list.map((el, id) => {id >= activePage - 1 * 10 && id < activePage * 10 } return)\n      console.log('data.users:',data.users);\n      const copy = data?.users?.map(({ firstName, lastName, email, role, birthDate, createdAt }) => {\n        return {\n          firstName,\n          lastName,\n          role: roles[role].label,\n          email,\n          birthDate,\n          createdAt\n        }\n      });\n\n      setUsers(copy);\n      console.log('copy',copy);\n      // if (index && index >= activePage - 1 * 10 && index < activePage * 10) {\n      //   return setUsers(copy);\n      // }\n\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getUsers();\n  }, [activePage]);\n\n  return [users, totalNumberOfPages, isLoading];\n};\n\nexport default useUsers;\n"]},"metadata":{},"sourceType":"module"}